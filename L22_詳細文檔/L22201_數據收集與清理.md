# L22201 數據收集與清理 - 詳細說明

## 一、核心概念與定義

### 1.1 數據收集定義
數據收集是從各種來源獲取原始數據的過程，是大數據處理的第一步。

### 1.2 數據清理定義
數據清理是識別和修正數據中的錯誤、不一致和缺失值的過程，確保數據品質。

### 1.3 重要性
- **數據品質決定分析結果**：垃圾進，垃圾出(GIGO)
- **提高模型性能**：清理後的數據訓練效果更好
- **節省後續成本**：早期清理避免後續問題

---

## 二、數據收集

### 2.1 數據來源

#### 2.1.1 內部數據源
- **業務系統數據**：
  - ERP系統
  - CRM系統
  - 交易系統
- **資料庫數據**：
  - 關聯式資料庫
  - NoSQL資料庫
  - 數據倉庫
- **日誌數據**：
  - Web日誌
  - 應用日誌
  - 系統日誌
- **API數據**：
  - RESTful API
  - GraphQL API
  - 內部服務API

#### 2.1.2 外部數據源
- **公開數據集**：
  - 政府開放數據
  - 學術數據集
  - Kaggle數據集
- **第三方API**：
  - 社交媒體API
  - 天氣API
  - 地圖API
- **Web爬蟲**：
  - 網頁內容
  - 新聞文章
  - 產品信息

#### 2.1.3 感測器數據(IoT)
- **物聯網設備**：
  - 溫度感測器
  - 壓力感測器
  - 運動感測器
- **特點**：
  - 實時性
  - 大量數據
  - 連續性

#### 2.1.4 社交媒體數據
- **平台**：
  - Twitter
  - Facebook
  - Instagram
- **數據類型**：
  - 文本
  - 圖像
  - 視頻
  - 元數據

### 2.2 收集方法

#### 2.2.1 批次收集(Batch Collection)
- **定義**：定期批量收集數據
- **優點**：
  - 資源利用效率高
  - 易於管理
- **缺點**：
  - 延遲較高
  - 實時性差
- **應用**：歷史數據分析、報表生成

#### 2.2.2 即時收集(Real-time Collection)
- **定義**：持續實時收集數據
- **優點**：
  - 實時性強
  - 及時響應
- **缺點**：
  - 資源消耗大
  - 管理複雜
- **應用**：監控系統、實時分析

#### 2.2.3 串流收集(Streaming Collection)
- **定義**：連續數據流收集
- **技術**：
  - Apache Kafka
  - Apache Flink
  - Apache Storm
- **應用**：實時處理、事件驅動

#### 2.2.4 增量收集(Incremental Collection)
- **定義**：只收集新增或變更的數據
- **優點**：
  - 效率高
  - 資源節省
- **方法**：
  - 時間戳記
  - 版本號
  - 變更日誌

### 2.3 數據獲取技術

#### 2.3.1 Web爬蟲(Web Scraping)
- **工具**：
  - BeautifulSoup
  - Scrapy
  - Selenium
- **注意事項**：
  - 遵守robots.txt
  - 尊重網站條款
  - 控制爬取頻率

#### 2.3.2 API整合
- **RESTful API**：
  - HTTP請求
  - JSON格式
- **認證方式**：
  - API Key
  - OAuth
  - Token

#### 2.3.3 資料庫查詢
- **SQL查詢**：
  - SELECT語句
  - 連接查詢
  - 聚合查詢
- **NoSQL查詢**：
  - MongoDB查詢
  - 鍵值查詢

#### 2.3.4 檔案傳輸
- **FTP/SFTP**：檔案傳輸協議
- **HTTP/HTTPS**：網頁下載
- **雲端儲存**：S3、Azure Blob

---

## 三、數據清理

### 3.1 缺失值處理

#### 3.1.1 缺失值類型
- **MCAR (Missing Completely At Random)**：
  - 完全隨機缺失
  - 與任何變數無關
- **MAR (Missing At Random)**：
  - 隨機缺失
  - 與觀察變數有關
- **MNAR (Missing Not At Random)**：
  - 非隨機缺失
  - 與缺失值本身有關

#### 3.1.2 刪除策略
- **刪除整行**：
  - 缺失值少
  - 不影響樣本代表性
- **刪除整列**：
  - 缺失值多（>50%）
  - 變數不重要

#### 3.1.3 填補策略
- **統計值填補**：
  - 平均值：數值變數
  - 中位數：有異常值
  - 眾數：類別變數
- **回歸填補**：
  - 線性回歸
  - 使用其他變數預測
- **插值方法**：
  - 線性插值
  - 樣條插值
  - 時間序列插值
- **KNN填補**：
  - 使用相似樣本
  - 考慮多個變數

### 3.2 異常值處理

#### 3.2.1 異常值檢測方法
- **統計方法**：
  - **Z-score**：|z| > 3為異常
  - **IQR方法**：超出Q3+1.5×IQR或Q1-1.5×IQR
  - **3σ原則**：超出3個標準差
- **視覺化方法**：
  - 箱線圖
  - 散點圖
  - 直方圖
- **機器學習方法**：
  - **孤立森林(Isolation Forest)**：無監督異常檢測
  - **DBSCAN**：密度聚類
  - **一類SVM**：單類分類

#### 3.2.2 異常值處理策略
- **刪除**：明顯錯誤的異常值
- **修正**：可修正的異常值
- **轉換**：
  - 對數轉換
  - Box-Cox轉換
  - 平方根轉換
- **保留**：可能是真實的極端值

### 3.3 數據一致性

#### 3.3.1 格式標準化
- **日期格式**：統一為YYYY-MM-DD
- **數值格式**：統一小數位數
- **文字格式**：統一大小寫、空格

#### 3.3.2 編碼統一
- **字符編碼**：統一為UTF-8
- **類別編碼**：統一類別值
- **數值編碼**：統一數值範圍

#### 3.3.3 單位轉換
- **度量單位**：統一為標準單位
- **貨幣單位**：統一貨幣
- **時間單位**：統一時區

#### 3.3.4 重複數據識別與移除
- **完全重複**：完全相同記錄
- **近似重複**：相似但不完全相同
- **業務邏輯重複**：業務意義重複
- **方法**：
  - 哈希比較
  - 相似度計算
  - 業務規則

### 3.4 數據轉換

#### 3.4.1 數據類型轉換
- **字符串轉數值**：解析數字
- **數值轉類別**：分組或離散化
- **日期轉換**：解析日期格式

#### 3.4.2 數據正規化
- **Min-Max正規化**：
  - 公式：x' = (x - min) / (max - min)
  - 範圍：[0, 1]
- **Z-score標準化**：
  - 公式：z = (x - μ) / σ
  - 均值0，標準差1

#### 3.4.3 數據標準化
- **單位標準化**：統一單位
- **格式標準化**：統一格式

#### 3.4.4 特徵編碼
- **One-Hot Encoding**：
  - 類別變數轉為二進制向量
  - 適用：無序類別
- **Label Encoding**：
  - 類別轉為數值標籤
  - 適用：有序類別

---

## 四、數據品質評估

### 4.1 品質指標
- **完整性**：數據完整程度
- **準確性**：數據正確程度
- **一致性**：數據一致程度
- **時效性**：數據及時程度
- **有效性**：數據有效程度

### 4.2 品質檢查
- **自動檢查**：程式自動檢查
- **人工檢查**：人工抽樣檢查
- **統計檢查**：統計方法檢查

---

## 五、實務應用

### 5.1 數據清理流程
1. **數據探索**：了解數據特徵
2. **問題識別**：識別數據問題
3. **清理策略**：制定清理策略
4. **執行清理**：執行清理操作
5. **驗證結果**：驗證清理效果

### 5.2 工具與技術
- **Python**：
  - Pandas：數據處理
  - NumPy：數值計算
  - Scikit-learn：數據清理
- **R**：
  - dplyr：數據處理
  - tidyr：數據整理

---

## 六、考試重點提醒

### 6.1 必記概念
- 數據收集的方法和來源
- 缺失值處理策略
- 異常值檢測方法
- 數據清理流程

### 6.2 實務應用
- 能夠選擇合適的數據收集方法
- 能夠處理缺失值和異常值
- 能夠進行數據轉換和編碼

---

## 七、參考資源

### 7.1 工具與庫
- **Python**：Pandas、NumPy
- **R**：dplyr、tidyr
- **ETL工具**：Talend、Informatica

---

**考試日期：2026/05/23**
